name: 'simple_pipeline'
operators:
    -
        name: '_start_op'
        function: '_start_op'
        init_args:
        inputs:
            -
                df: '_start_df'
                name: 'video_path'
                col: 0
        outputs:
            -
                df: 'input_df'
        iter_info:
            type: map
    -
      name: 'video'
      function: 'local/cv2_decoder'
      init_args:
      inputs:
            -
                df: 'input_df'
                name: 'video_path'
                col: 0
      outputs:
            -
                df: 'video_df'
      iter_info:
            type: generator
    -
        name: 'batch_nn'
        function: 'local/batch_nn_operator'
        init_args:
          model_name: 'resnet50'
        inputs:
            -
                df: 'video_df'
                name: 'img'
                col: 0
        outputs:
            -
                df: 'output_df'
        iter_info:
            type: map
        extra:
          batch_size: 3
          max_latency: 0.1
    -
        name: '_end_op'
        function: '_end_op'
        init_args:
        inputs:
            -
                df: 'output_df'
                name: 'res'
                col: 0
        outputs:
            -
                df: '_end_df'
        iter_info:
            type: map
dataframes:
    -
        name: '_start_df'
        columns:
            -
                name: 'video_path'
                vtype: 'str'
    -
        name: 'input_df'
        columns:
            -
                name: 'video_path'
                vtype: 'str'
    -
        name: 'video_df'
        columns:
            -
                name: 'img'
                vtype: 'Image'
    -
        name: 'output_df'
        columns:
            -
                name: 'res'
                vtype: 'ndarray'                                
    -
        name: '_end_df'
        columns:
            -
                name: 'res'
                vtype: 'ndarray'
